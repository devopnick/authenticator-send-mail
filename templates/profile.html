{% extends 'dashboard.html' %}

{% block content %}
<h1 class="text-2xl font-semibold mb-4">Benvenuto, {{ email }}!</h1>

<!-- Sezione per i messaggi di feedback -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="mb-4">
    {% for category, message in messages %}
    <div
        class="p-2 text-sm {{ 'bg-green-100 text-green-800' if category == 'success' else 'bg-red-100 text-red-800' }} rounded">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}
{% endwith %}

<!-- Modulo per inviare email -->
<form method="POST" class="space-y-4">
    <div>
        <label for="recipient_email" class="block text-sm font-medium text-gray-700">Destinatario:</label>
        <input type="email" name="recipient_email" id="recipient_email" placeholder="Destinatario"
            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required><br>
    </div>

    <div>
        <label for="subject" class="block text-sm font-medium text-gray-700">Oggetto:</label>
        <input type="text" name="subject" id="subject" placeholder="Oggetto"
            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required><br>
    </div>

    <div>
        <label for="body" class="block text-sm font-medium text-gray-700">Corpo del messaggio:</label>
        <textarea name="body" id="body" placeholder="Corpo del messaggio" rows="6"
            class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            required></textarea><br>
    </div>

    <button type="submit"
        class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200">
        Invia Email
    </button>
</form>

<!-- Link per il logout -->
<a href="{{ url_for('logout') }}" class="text-blue-600 hover:text-blue-800 mt-4 inline-block">Esci</a>
{% endblock %}